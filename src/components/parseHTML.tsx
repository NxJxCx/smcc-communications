'use client'

import Image from "next/image";
import { useEffect, useState } from "react";
import jsxToString from "./JSXToString";

const testSignature = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfQAAADICAYAAAAeGRPoAAAAAXNSR0IArs4c6QAAIABJREFUeF7tnQccftd4xx+joaohVa2itIRYESN2UBojaqW0JWrGqhDV2kpqryI2sSto1FZipaVRI9SIIBLVSmqVokaLor3f5jzNyXHf973j3HXu7/l8QvL/33vuOb9z3/ucZ/2es5lECAgBISAEhIAQWDwCZ1v8CrQAISAEhIAQEAJCwKTQ9RIIASEgBISAECgAASn0AjZRSxACQkAICAEhIIWud0AICAEhIASEQAEISKEXsIlaghAQAkJACAgBKXS9A0JACAgBISAECkBACr2ATdQShIAQEAJCQAhIoesdEAJCQAgIASFQAAJS6AVsopYgBISAEBACQkAKXe+AEBACQkAICIECEJBCL2ATtQQhIASEgBAQAlLoegeEgBAQAkJACBSAgBR6AZuoJQgBISAEhIAQkELXOyAEhIAQEAJCoAAEpNAL2EQtQQgIASEgBISAFLreASEgBISAEBACBSAghV7AJmoJQkAICAEhIASk0PUOCAEhIASEgBAoAAEp9AI2UUsQAkJACAgBISCFrndACAgBISAEhEABCEihF7CJWoIQEAJCQAgIASl0vQNCQAgIASEgBApAQAq9gE3UEoSAEBACQkAISKHrHRACQkAICAEhUAACUugFbKKWIASEgBAQAkJACl3vgBAQAkJACAiBAhCQQi9gE7UEISAEhIAQEAJS6HoHhIAQEAJCQAgUgIAUegGbqCUIASEgBISAEJBC1zsgBISAEBACQqAABKTQC9hELUEICAEhIASEgBS63gEhIASEgBAQAgUgIIVewCZqCUJACAgBISAEpND1DggBISAEhIAQKAABKfQCNlFLEAJCQAgIASEgha53QAgIASEgBIRAAQhIoRewiVqCEBACQkAICAEpdL0DS0Tgz81sPzP7dpj8R8zso2Z2whIXozkLASEgBHIgIIWeA0WNMRYCv2dmr93ysPea2Q3GmoyeIwSEgBCYEwJS6HPaDc1lGwInmdnlG0KEUke5S4SAEBACq0FACn01W73YhV7OzD5dM/vPBmv9gmZ2TjO7Z3TNd81sz8WuWBMXAkJACHRAQAq9A2i6ZTQEfitS2vFDH139B3H0WPjvw81sr/CHf21mvz/aTPUgISAEhMDECEihT7wBevxG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"

export default function ParseHTMLTemplate({ htmlString, showApprovedSignatories = false, approvedSignatureIds = [] }: { htmlString: string, showApprovedSignatories?: boolean, approvedSignatureIds?: string[] }) {
  const [htmlFinal, setHTMLFinal] = useState<string>(htmlString);
  useEffect(() => {
    if (showApprovedSignatories) {
      const parser = new DOMParser();
      const doc = parser.parseFromString(htmlString, "text/html");
      const signatories = doc.querySelectorAll("table[data-type='signatory']")
      signatories.forEach((signatory) => {
        if (approvedSignatureIds.includes((signatory as HTMLTableElement).dataset.signatoryId || '(unknown)')) {
          const sname = signatory.querySelector("td[data-type='signatory-name']")
          sname?.classList.add("relative")
          const absoluteSignature = jsxToString(
            <Image src={testSignature} width={100} height={30} alt="signature" className="absolute left-0 bottom-0 z-50 w-full" />
          )
          const parsed = parser.parseFromString(absoluteSignature, "text/html")
          sname?.appendChild(parsed.body.children[0])
        }
      })
      setHTMLFinal(doc.documentElement.innerHTML);
      return () => {}
    }
    setHTMLFinal(htmlString);
  }, [htmlString, showApprovedSignatories, approvedSignatureIds])

  return !!htmlString ? (
    <div style={{
      width: 11 * 96,
      height: 11 * 96,
      maxHeight: "80vh",
      overflow: "auto",
      border: "1px solid #e5e7eb",
      paddingTop: "16px",
      paddingBottom: "16px",
    }}>
      <div style={{ maxWidth: 8.5 * 96, minHeight: 11 * 96, backgroundColor: "white" }} className="border shadow mx-auto p-[12.2mm]">
        <div dangerouslySetInnerHTML={{ __html: htmlFinal }} />
      </div>
    </div>
  ) : undefined
}